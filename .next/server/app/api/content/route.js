"use strict";(()=>{var e={};e.id=170,e.ids=[170],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5819:e=>{e.exports=import("@azure/cosmos")},9628:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{originalPathname:()=>m,patchFetch:()=>l,requestAsyncStorage:()=>d,routeModule:()=>u,serverHooks:()=>y,staticGenerationAsyncStorage:()=>p});var n=r(9303),i=r(8716),s=r(670),c=r(6258),o=e([c]);c=(o.then?(await o)():o)[0];let u=new n.AppRouteRouteModule({definition:{kind:i.x.APP_ROUTE,page:"/api/content/route",pathname:"/api/content",filename:"route",bundlePath:"app/api/content/route"},resolvedPagePath:"C:\\Users\\puspa\\OneDrive\\Documents\\Work\\luxylyfe_project\\app\\api\\content\\route.ts",nextConfigOutput:"",userland:c}),{requestAsyncStorage:d,staticGenerationAsyncStorage:p,serverHooks:y}=u,m="/api/content/route";function l(){return(0,s.patchFetch)({serverHooks:y,staticGenerationAsyncStorage:p})}a()}catch(e){a(e)}})},6258:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.r(t),r.d(t,{GET:()=>c,dynamic:()=>o});var n=r(7070),i=r(4544),s=e([i]);i=(s.then?(await s)():s)[0];let o="force-dynamic";async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("pageType"),a="true"===t.get("includeSettings"),s={};if(r){let e=await i.db.pageContent.findMany({pageType:r,isActive:!0});e.sort((e,t)=>e.order!==t.order?e.order-t.order:new Date(t.createdAt).getTime()-new Date(e.createdAt).getTime());let t=e.map(e=>({id:e.id,sectionType:e.sectionType,title:e.title,subtitle:e.subtitle,content:e.content,images:e.images,order:e.order}));s.content=t}if(a){let e=(await i.db.siteSettings.findMany()).filter(e=>e.isPublic);s.settings=e.reduce((e,t)=>{let r=t.value;if("number"===t.dataType)r=Number(t.value);else if("boolean"===t.dataType)r="true"===t.value;else if("json"===t.dataType)try{r=JSON.parse(t.value)}catch(e){console.error("Error parsing JSON setting:",t.key,e)}return e[t.key]=r,e},{})}return n.NextResponse.json({...s,message:"Public content retrieved successfully"})}catch(e){return console.error("Error fetching public content:",e),n.NextResponse.json({error:"Failed to fetch content"},{status:500})}}a()}catch(e){a(e)}})},4544:(e,t,r)=>{r.a(e,async(e,a)=>{try{r.d(t,{db:()=>d});var n=r(5819),i=e([n]);n=(i.then?(await i)():i)[0];let l={endpoint:process.env.COSMOS_DB_ENDPOINT,key:process.env.COSMOS_DB_KEY,databaseId:process.env.COSMOS_DB_DATABASE_NAME||"luxylyfe-db"},u=null;function s(){return(function(){if(!u){if(!process.env.COSMOS_DB_ENDPOINT||!process.env.COSMOS_DB_KEY)throw Error("Cosmos DB configuration missing. Please set COSMOS_DB_ENDPOINT and COSMOS_DB_KEY in your environment.");u=new n.CosmosClient({endpoint:l.endpoint,key:l.key})}return u})().database(l.databaseId)}function c(){return Date.now().toString()+Math.random().toString(36).substr(2,9)}function o(e,t=!1){let r=new Date().toISOString();return t||(e.createdAt=r),e.updatedAt=r,e}let d={user:{async create(e){let t=s().container("users"),r={id:c(),...o(e)},{resource:a}=await t.items.create(r);return a},async findUnique(e){let t=s().container("users");if(e.email){let{resources:r}=await t.items.query({query:"SELECT * FROM c WHERE c.email = @email",parameters:[{name:"@email",value:e.email}]}).fetchAll();return r[0]}return null},async findMany(e){let t=s().container("users");if(e?.role){let{resources:r}=await t.items.query({query:"SELECT * FROM c WHERE c.role = @role",parameters:[{name:"@role",value:e.role}]}).fetchAll();return r.sort((e,t)=>new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime())}let{resources:r}=await t.items.query("SELECT * FROM c").fetchAll();return r.sort((e,t)=>new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime())},async update(e,t){let r=s().container("users"),a=await this.findUnique(e);if(!a)throw Error("User not found");let n={...a,...o(t,!0)},{resource:i}=await r.item(e.id,e.id).replace(n);return i},async delete(e){let t=s().container("users"),{resource:r}=await t.item(e.id,e.id).delete();return r},async count(e){let t=s().container("users");if(e?.role){let{resources:r}=await t.items.query({query:"SELECT VALUE COUNT(1) FROM c WHERE c.role = @role",parameters:[{name:"@role",value:e.role}]}).fetchAll();return r[0]||0}let{resources:r}=await t.items.query("SELECT VALUE COUNT(1) FROM c").fetchAll();return r[0]||0}},property:{async create(e){let t=s().container("properties"),r={id:c(),...o(e)},{resource:a}=await t.items.create(r);return a},async findUnique(e){let t=s().container("properties");if(e.id)try{let{resource:r}=await t.item(e.id,e.id).read();return r}catch(e){if(404===e.code)return null;throw e}if(e.propertyId){let{resources:r}=await t.items.query({query:"SELECT * FROM c WHERE c.propertyId = @propertyId",parameters:[{name:"@propertyId",value:e.propertyId}]}).fetchAll();return r[0]}return null},async findMany(e){let t=s().container("properties"),r="SELECT * FROM c",a=[];if(e?.isAvailable!==void 0||e?.isFeature!==void 0){let t=[];void 0!==e.isAvailable&&(t.push("c.isAvailable = @isAvailable"),a.push({name:"@isAvailable",value:e.isAvailable})),void 0!==e.isFeature&&(t.push("c.isFeature = @isFeature"),a.push({name:"@isFeature",value:e.isFeature})),r+=" WHERE "+t.join(" AND ")}let{resources:n}=await t.items.query({query:r,parameters:a}).fetchAll();return n.sort((e,t)=>new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime())},async update(e,t){let r=s().container("properties"),a=await this.findUnique(e);if(!a)throw Error("Property not found");let n={...a,...o(t,!0)},{resource:i}=await r.item(e.id,e.id).replace(n);return i},async delete(e){let t=s().container("properties"),{resource:r}=await t.item(e.id,e.id).delete();return r},async count(){let e=s().container("properties"),{resources:t}=await e.items.query("SELECT VALUE COUNT(1) FROM c").fetchAll();return t[0]||0}},session:{async create(e){let t=s().container("sessions"),r={id:c(),...e,createdAt:new Date().toISOString()},{resource:a}=await t.items.create(r);return a},async findUnique(e){let t=s().container("sessions");if(e.id)try{let{resource:r}=await t.item(e.id,e.id).read();return r}catch(e){if(404===e.code)return null;throw e}if(e.token){let{resources:r}=await t.items.query({query:"SELECT * FROM c WHERE c.token = @token",parameters:[{name:"@token",value:e.token}]}).fetchAll();return r[0]}return null},async findMany(e){let t=s().container("sessions");if(e?.userId){let{resources:r}=await t.items.query({query:"SELECT * FROM c WHERE c.userId = @userId",parameters:[{name:"@userId",value:e.userId}]}).fetchAll();return r.sort((e,t)=>new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime())}let{resources:r}=await t.items.query("SELECT * FROM c").fetchAll();return r.sort((e,t)=>new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime())},async delete(e){let t=s().container("sessions"),{resource:r}=await t.item(e.id,e.id).delete();return r},async count(){let e=s().container("sessions"),{resources:t}=await e.items.query("SELECT VALUE COUNT(1) FROM c").fetchAll();return t[0]||0}},loginAttempt:{async create(e){let t=s().container("login_attempts"),r={id:c(),...e,createdAt:new Date().toISOString()},{resource:a}=await t.items.create(r);return a},async findMany(e){let t=s().container("login_attempts");if(e?.email){let{resources:r}=await t.items.query({query:"SELECT * FROM c WHERE c.email = @email",parameters:[{name:"@email",value:e.email}]}).fetchAll();return r.sort((e,t)=>new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime())}let{resources:r}=await t.items.query("SELECT * FROM c").fetchAll();return r.sort((e,t)=>new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime())},async count(){let e=s().container("login_attempts"),{resources:t}=await e.items.query("SELECT VALUE COUNT(1) FROM c").fetchAll();return t[0]||0}},pageContent:{async create(e){let t=s().container("page_contents"),r={id:c(),...o(e)},{resource:a}=await t.items.create(r);return a},async findMany(e){let t=s().container("page_contents"),r="SELECT * FROM c",a=[];if(e?.pageType!==void 0||e?.isActive!==void 0){let t=[];void 0!==e.pageType&&(t.push("c.pageType = @pageType"),a.push({name:"@pageType",value:e.pageType})),void 0!==e.isActive&&(t.push("c.isActive = @isActive"),a.push({name:"@isActive",value:e.isActive})),r+=" WHERE "+t.join(" AND ")}let{resources:n}=await t.items.query({query:r,parameters:a}).fetchAll();return n.sort((e,t)=>{let r=e.order||0,a=t.order||0;return r!==a?r-a:new Date(t.createdAt||"").getTime()-new Date(e.createdAt||"").getTime()})},async count(){let e=s().container("page_contents"),{resources:t}=await e.items.query("SELECT VALUE COUNT(1) FROM c").fetchAll();return t[0]||0}},siteSettings:{async create(e){let t=s().container("site_settings"),r={id:c(),...o(e)},{resource:a}=await t.items.create(r);return a},async findUnique(e){let t=s().container("site_settings"),{resources:r}=await t.items.query({query:"SELECT * FROM c WHERE c.key = @key",parameters:[{name:"@key",value:e.key}]}).fetchAll();return r[0]},async findMany(){let e=s().container("site_settings"),{resources:t}=await e.items.query("SELECT * FROM c").fetchAll();return t.sort((e,t)=>(e.key||"").localeCompare(t.key||""))},async count(){let e=s().container("site_settings"),{resources:t}=await e.items.query("SELECT VALUE COUNT(1) FROM c").fetchAll();return t[0]||0}},async $disconnect(){}};a()}catch(e){a(e)}})}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[276,972],()=>r(9628));module.exports=a})();