"use strict";(()=>{var e={};e.id=80,e.ids=[80],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},5754:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>x,patchFetch:()=>h,requestAsyncStorage:()=>m,routeModule:()=>y,serverHooks:()=>v,staticGenerationAsyncStorage:()=>f});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>g});var i=r(9303),n=r(8716),a=r(3131),u=r(7070),o=r(3493),l=r(1482),p=r.n(l);async function d(e){try{let t=e.cookies.get("auth-token")?.value;if(!t)return null;let r=p().verify(t,process.env.JWT_SECRET),s=await o._.user.findUnique({where:{id:r.userId},select:{id:!0,email:!0,role:!0,name:!0}});if(s?.role!=="ADMIN"&&s?.role!=="SUPERADMIN")return null;return s}catch(e){return null}}async function c(e){try{let{searchParams:t}=new URL(e.url),r=t.get("key"),s="true"===t.get("public"),i={};r&&(i.key=r),s&&(i.isPublic=!0);let n=await o._.siteSettings.findMany({where:i,select:{id:!0,key:!0,value:!0,description:!0,dataType:!0,isPublic:!0,updatedAt:!0},orderBy:{key:"asc"}});return u.NextResponse.json({settings:n,message:"Site settings retrieved successfully"})}catch(e){return console.error("Error fetching site settings:",e),u.NextResponse.json({error:"Failed to fetch site settings"},{status:500})}}async function g(e){try{let t=await d(e);if(!t)return u.NextResponse.json({error:"Unauthorized. Admin access required."},{status:403});let{key:r,value:s,description:i,dataType:n,isPublic:a}=await e.json();if(!r||void 0===s)return u.NextResponse.json({error:"Key and value are required"},{status:400});let l=await o._.siteSettings.upsert({where:{key:r},update:{value:s,description:i||null,dataType:n||"string",isPublic:a||!1,updatedBy:t.id},create:{key:r,value:s,description:i||null,dataType:n||"string",isPublic:a||!1,updatedBy:t.id}});return u.NextResponse.json({message:"Site setting saved successfully",setting:l})}catch(e){return console.error("Error saving site setting:",e),u.NextResponse.json({error:"Failed to save site setting"},{status:500})}}let y=new i.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/admin/settings/route",pathname:"/api/admin/settings",filename:"route",bundlePath:"app/api/admin/settings/route"},resolvedPagePath:"C:\\Users\\puspa\\OneDrive\\Documents\\Work\\luxylyfe_project\\app\\api\\admin\\settings\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:v}=y,x="/api/admin/settings/route";function h(){return(0,a.patchFetch)({serverHooks:v,staticGenerationAsyncStorage:f})}},3493:(e,t,r)=>{r.d(t,{_:()=>i});let s=require("@prisma/client"),i=globalThis.prisma??new s.PrismaClient}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972,482],()=>r(5754));module.exports=s})();