"use strict";(()=>{var e={};e.id=992,e.ids=[992],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2781:e=>{e.exports=require("stream")},3837:e=>{e.exports=require("util")},3881:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>v,requestAsyncStorage:()=>f,routeModule:()=>m,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var s={};t.r(s),t.d(s,{DELETE:()=>c});var n=t(9303),u=t(8716),i=t(3131),o=t(7070),a=t(3493),d=t(1482),l=t.n(d);async function p(e){try{let r=e.cookies.get("auth-token")?.value;if(!r)return null;let t=l().verify(r,process.env.JWT_SECRET),s=await a._.user.findUnique({where:{id:t.userId},select:{id:!0,email:!0,role:!0,name:!0}});if(s?.role!=="SUPERADMIN")return null;return s}catch(e){return null}}async function c(e,{params:r}){try{let t=await p(e);if(!t)return o.NextResponse.json({error:"Unauthorized. Superadmin access required."},{status:403});let{userId:s}=r;if(!s)return o.NextResponse.json({error:"User ID is required"},{status:400});if(s===t.id)return o.NextResponse.json({error:"You cannot delete your own account"},{status:400});let n=await a._.user.findUnique({where:{id:s},select:{id:!0,email:!0,name:!0,role:!0}});if(!n)return o.NextResponse.json({error:"User not found"},{status:404});return await a._.session.deleteMany({where:{userId:s}}),await a._.user.delete({where:{id:s}}),o.NextResponse.json({message:`User ${n.name||n.email} (${n.role}) deleted successfully`})}catch(e){return console.error("Error deleting user:",e),o.NextResponse.json({error:"Failed to delete user"},{status:500})}}let m=new n.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/admin/users/[userId]/route",pathname:"/api/admin/users/[userId]",filename:"route",bundlePath:"app/api/admin/users/[userId]/route"},resolvedPagePath:"C:\\Users\\puspa\\OneDrive\\Documents\\Work\\luxylyfe_project\\app\\api\\admin\\users\\[userId]\\route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:x,serverHooks:h}=m,q="/api/admin/users/[userId]/route";function v(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}},3493:(e,r,t)=>{t.d(r,{_:()=>n});let s=require("@prisma/client"),n=globalThis.prisma??new s.PrismaClient}};var r=require("../../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),s=r.X(0,[948,972,482],()=>t(3881));module.exports=s})();