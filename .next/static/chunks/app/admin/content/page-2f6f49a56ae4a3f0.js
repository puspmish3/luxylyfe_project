(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[975],{8359:function(e,t,s){Promise.resolve().then(s.bind(s,3319))},3319:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return r}});var a=s(7437),l=s(2265),n=s(6463);function r(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)(null),[r,i]=(0,l.useState)([]),[c,d]=(0,l.useState)([]),[o,x]=(0,l.useState)("HOME"),[m,u]=(0,l.useState)(null),[g,h]=(0,l.useState)(null),[p,b]=(0,l.useState)(!1),[y,j]=(0,l.useState)(!1),[v,N]=(0,l.useState)(!0),f=["HOME","PROJECTS","ABOUT","MISSION","VISION","CONTACT"],[w,k]=(0,l.useState)({pageType:"HOME",sectionType:"HERO",title:"",subtitle:"",content:"",images:[],order:0,isActive:!0}),[C,T]=(0,l.useState)({key:"",value:"",dataType:"string",isPublic:!1});(0,l.useEffect)(()=>{let t=async()=>{try{let t=await fetch("/api/auth/me");if(t.ok){let a=await t.json();a.user&&("ADMIN"===a.user.role||"SUPERADMIN"===a.user.role)?s(a.user):e.push("/admin-login")}else e.push("/admin-login")}catch(t){console.error("Auth check failed:",t),e.push("/admin-login")}finally{N(!1)}},a=async()=>{try{let e=await fetch("/api/admin/content");if(e.ok){let t=await e.json();i(t.contents||[])}}catch(e){console.error("Error fetching contents:",e)}},l=async()=>{try{let e=await fetch("/api/admin/settings");if(e.ok){let t=await e.json();d(t.settings||[])}}catch(e){console.error("Error fetching settings:",e)}};(async()=>{await t(),await a(),await l()})()},[e]);let S=async()=>{try{let e=await fetch("/api/admin/content");if(e.ok){let t=await e.json();i(t.contents||[])}}catch(e){console.error("Error fetching contents:",e)}},E=async()=>{try{let e=await fetch("/api/admin/settings");if(e.ok){let t=await e.json();d(t.settings||[])}}catch(e){console.error("Error fetching settings:",e)}},A=async e=>{e.preventDefault();try{let e=m?"/api/admin/content?id=".concat(m.id):"/api/admin/content",t=await fetch(e,{method:m?"PUT":"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(w)});if(t.ok)await S(),b(!1),u(null),R(),alert(m?"Content updated successfully!":"Content created successfully!");else{let e=await t.json();alert("Error: ".concat(e.error))}}catch(e){console.error("Error saving content:",e),alert("Failed to save content")}},O=async e=>{e.preventDefault();try{let e=await fetch("/api/admin/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)});if(e.ok)await E(),j(!1),h(null),M(),alert("Settings updated successfully!");else{let t=await e.json();alert("Error: ".concat(t.error))}}catch(e){console.error("Error saving settings:",e),alert("Failed to save settings")}},P=e=>{u(e),k({pageType:e.pageType,sectionType:e.sectionType,title:e.title,subtitle:e.subtitle||"",content:e.content||"",images:e.images,order:e.order,isActive:e.isActive}),b(!0)},I=e=>{h(e),T({key:e.key,value:e.value,dataType:e.dataType,isPublic:e.isPublic}),j(!0)},R=()=>{k({pageType:"HOME",sectionType:"HERO",title:"",subtitle:"",content:"",images:[],order:0,isActive:!0})},M=()=>{T({key:"",value:"",dataType:"string",isPublic:!1})},U=e=>{k(t=>({...t,images:t.images.filter((t,s)=>s!==e)}))},H=r.filter(e=>e.pageType===o);return v?(0,a.jsx)("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:(0,a.jsx)("div",{className:"text-xl",children:"Loading..."})}):t?(0,a.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,a.jsx)("div",{className:"bg-white shadow",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Content Management"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Manage page content and site settings"})]}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{onClick:()=>e.push("/admin/dashboard"),className:"px-4 py-2 bg-gray-600 text-white rounded hover:bg-gray-700",children:"Back to Dashboard"}),(0,a.jsx)("button",{onClick:()=>{R(),b(!0)},className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Add Content"}),(0,a.jsx)("button",{onClick:()=>{M(),j(!0)},className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add Setting"})]})]})})}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Page Content"}),(0,a.jsx)("select",{value:o,onChange:e=>x(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md",children:f.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[H.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("span",{className:"px-2 py-1 bg-blue-100 text-blue-800 text-sm rounded",children:e.sectionType}),(0,a.jsxs)("span",{className:"px-2 py-1 bg-gray-100 text-gray-800 text-sm rounded",children:["Order: ",e.order]}),(0,a.jsx)("span",{className:"px-2 py-1 text-sm rounded ".concat(e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.isActive?"Active":"Inactive"})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:e.title}),e.subtitle&&(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:e.subtitle}),e.content&&(0,a.jsxs)("p",{className:"text-gray-700 mt-2 text-sm",children:[e.content.substring(0,150),"..."]}),e.images.length>0&&(0,a.jsxs)("p",{className:"text-sm text-gray-500 mt-2",children:[e.images.length," image(s)"]})]}),(0,a.jsx)("button",{onClick:()=>P(e),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700",children:"Edit"})]})},e.id)),0===H.length&&(0,a.jsxs)("div",{className:"text-center py-8 text-gray-500",children:["No content found for ",o," page"]})]})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Site Settings"}),(0,a.jsxs)("div",{className:"space-y-3",children:[c.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded p-3",children:(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:e.key}),(0,a.jsx)("span",{className:"px-1 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:e.dataType}),e.isPublic&&(0,a.jsx)("span",{className:"px-1 py-0.5 bg-green-100 text-green-700 text-xs rounded",children:"Public"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate",children:e.value})]}),(0,a.jsx)("button",{onClick:()=>I(e),className:"px-2 py-1 bg-blue-600 text-white text-xs rounded hover:bg-blue-700",children:"Edit"})]})},e.key)),0===c.length&&(0,a.jsx)("div",{className:"text-center py-4 text-gray-500",children:"No settings configured"})]})]})})]})}),p&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:m?"Edit Content":"Add New Content"}),(0,a.jsxs)("form",{onSubmit:A,className:"space-y-4",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Page Type"}),(0,a.jsx)("select",{value:w.pageType,onChange:e=>k(t=>({...t,pageType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:f.map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Section Type"}),(0,a.jsx)("select",{value:w.sectionType,onChange:e=>k(t=>({...t,sectionType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:["HERO","SECTION","GALLERY","FEATURES","TESTIMONIALS"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Title"}),(0,a.jsx)("input",{type:"text",value:w.title,onChange:e=>k(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subtitle (Optional)"}),(0,a.jsx)("input",{type:"text",value:w.subtitle,onChange:e=>k(t=>({...t,subtitle:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Content (Optional)"}),(0,a.jsx)("textarea",{value:w.content,onChange:e=>k(t=>({...t,content:e.target.value})),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Images"}),(0,a.jsxs)("div",{className:"space-y-2",children:[w.images.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>{let s=[...w.images];s[t]=e.target.value,k(e=>({...e,images:s}))},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md",placeholder:"Image URL"}),(0,a.jsx)("button",{type:"button",onClick:()=>U(t),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700",children:"Remove"})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>{let e=prompt("Enter image URL:");e&&k(t=>({...t,images:[...t.images,e]}))},className:"px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:"Add Image"})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Order"}),(0,a.jsx)("input",{type:"number",value:w.order,onChange:e=>k(t=>({...t,order:parseInt(e.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md"})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:w.isActive,onChange:e=>k(t=>({...t,isActive:e.target.checked})),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Active"})]})})]}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{b(!1),u(null),R()},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:m?"Update":"Create"})]})]})]})}),y&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsx)("h3",{className:"text-xl font-bold mb-4",children:g?"Edit Setting":"Add New Setting"}),(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Key"}),(0,a.jsx)("input",{type:"text",value:C.key,onChange:e=>T(t=>({...t,key:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,disabled:!!g})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Value"}),(0,a.jsx)("textarea",{value:C.value,onChange:e=>T(t=>({...t,value:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data Type"}),(0,a.jsx)("select",{value:C.dataType,onChange:e=>T(t=>({...t,dataType:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md",required:!0,children:["string","number","boolean","json"].map(e=>(0,a.jsx)("option",{value:e,children:e},e))})]}),(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsxs)("label",{className:"flex items-center",children:[(0,a.jsx)("input",{type:"checkbox",checked:C.isPublic,onChange:e=>T(t=>({...t,isPublic:e.target.checked})),className:"mr-2"}),(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Public (accessible via public API)"})]})}),(0,a.jsxs)("div",{className:"flex justify-end gap-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>{j(!1),h(null),M()},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded hover:bg-gray-400",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded hover:bg-green-700",children:g?"Update":"Create"})]})]})]})})]}):null}},6463:function(e,t,s){"use strict";var a=s(1169);s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})}},function(e){e.O(0,[971,23,744],function(){return e(e.s=8359)}),_N_E=e.O()}]);